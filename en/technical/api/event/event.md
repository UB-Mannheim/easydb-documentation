# Retrieve an event

    GET /api/v1/event/<id>?token=<token>

Retrieves an event from the database.

## Path parameters

|   |   |
|---|---|
| `id`  | Event ID (integer) |

## Query String

|   |   |
|---|---|
| `token` | Session token acquired with [/api/v1/session](/technical/api/session/session.md) |

## Output

An [event](/technical/types/event/event.md).

## HTTP status codes

|   |   |
|---|---|
| 200 | Success |
| 400 | [API error](/technical/errors/errors.md#api_error): something is malformed |
| 400 | [Event Not Found](/technical/errors/errors.md#event_not_found): event `id` not found |
| 500 | [Server error](/technical/errors/errors.md#server_error): internal server error |





# Poll events

    GET /api/v1/event/poll[/<last_max_id>]?token=<token>[&limit=<limit>]

Events can be polled, so that a frontend can refresh information regularly.

## Path parameters

|   |   |
|---|---|
| `last_max_id`  | Event ID last seen (integer): This must be at least `session.current_max_event_id`. Defaults to `session.current_max_event_id` if unset. |

## Query String

|   |   |
|---|---|
| `token` | Session token acquired with [/api/v1/session](/technical/api/session/session.md) |
| `limit` | The maximum number of returned Events. Valid values are *10* to *500*. Defaults to *25*. |

## Output

Returns all new Events with an ID greater than `last_max_id`. The Event's output format is the Short format of type [Event](/technical/types/event/event.md).

> Events may be filtered on a per user basis. Currently this call will return no events for an unauthenticated session.

### Exceptions:

* `OBJECT_INSERT` events are only returned if they were generated within the requesting session
* `OBJECT_UPDATE` events for type `user` are only returned if they where generated by the requesting user

## HTTP status codes

|   |   |
|---|---|
| 200 | Success |
| 400 | [API error](/technical/errors/errors.md#api_error): something is malformed |
| 500 | [Server error](/technical/errors/errors.md#server_error): internal server error |


# List events

	GET /api/v1/event/list?token=<token>&...

## Query String

|   |   |
|---|---|
| `token`     | Session token acquired with [/api/v1/session](/technical/api/session/session.md) |
| `limit`     | The maximum number of returned events (optional, integer). Unlimited, if unset. |
| `offset`    | The number of entries skipped in result set (optional, integer). 0 if unset. |
| `pollable`  | Filter for `pollable` attribute (boolean, optional). No filter if unset. |
| `type`      | Filter for `type` attribute (string, optional). No filter if unset. |
| `base_type` | Filter for `base_type` attribute (string, optional). No filter if unset. |
| `date_from` | Filter for minimum creation date/time (datetime, optional). No filter if unset. |
| `date_to`   | Filter for maximum creation date/time (datetime, optional). No filter if unset. |
| `sort`      | List of sort definitions (comma-separated). Per definition the field name is mandatory, the direction (`ASC` or `DESC`) is optional (defaulting to `ASC`). Supported fields are `_id`, `type`, `object_version`, `schema`, `object_id`, `timestamp`, `user_generated_displayname`. Example: `sort=schema,type.ASC,base_type.ASC,_id.DESC`. Default is `_id.DESC`. |
| `format`    | Output format (string, optional). `json` and `csv` formats are supported. `json` is used if unset. |
| `csv_delimiter` | CSV field delimiter (string, optional). Only for `format=csv`, `,` if unset. If a horizontal tab character should be used, it's URL-encoded ASCII value has to be specified: `%09`.|
| `csv_quote`     | CSV quote character (string, optional). Only for `format=csv`, `"` if unset. |
| `csv_escape`    | CSV escape character (string, optional). Only for `format=csv`, `"` if unset. |
| `csv_use_bom`   | Add UTF-8 byte order mark (boolean, optional). Only for `format=csv`, `false` if unset. |
| `csv_explode`   | Event info is written per key into individual columns (boolean, optional).  Only for `format=csv`, `false` if unset. |
| `csv_explode_array_concat` | Array values in event info are written as a string separated by the value of this parameter. (string, optional).  Only for `format=csv&csv_explode=true`. |

## Output

Returns all events matching the given filters. The event's output format is the short format of type [Event](/technical/types/event/event.md).

## Permissions

The user must be authenticated.

## HTTP status codes

|   |   |
|---|---|
| 200 | Success |
| 400 | [API error](/technical/errors/errors.md#api_error): something is malformed |
| 500 | [Server error](/technical/errors/errors.md#server_error): internal server error |

# Insert a new event

    POST /api/v1/event?token=<token>

The client can insert events of the types "SEARCH" and "DETAIL\_VIEW". The event can only be POSTed
if the corresponding base configuration ("system.log.search" or "system.log.detail\_view")
is enabled. Otherwise, this call returns an error.

## Query String

|   |   |
|---|---|
| `token` | Session token acquired with [/api/v1/session](/technical/api/session/session.md) |

## Input

The input is a JSON object containing:

| Attribute | Description |
|-----------|-------------|
| `type`    | The event type (string): one of **SEARCH**, **DETAIL\_VIEW** |
| `info`    | The event information (object, optional): defaults to **{}** |
| `object_version` | The event object version |
| `object_id` | The event object ID |
| `objecttype` | The object type name. |

## Output

The newly created [Event](/technical/types/event/event.md).

## Permissions

The user must be authenticated.

## HTTP status codes

|   |   |
|---|---|
| 200 | Success |
| 400 | [API error](/technical/errors/errors.md#api_error): something is malformed |
| 400 | [Not Authenticated](/technical/errors/errors.md#not_authenticated): session is not authenticated |
| 400 | [Event Type Disabled](/technical/errors/errors.md#event_type_disabled): event type is disabled |
| 500 | [Server error](/technical/errors/errors.md#server_error): internal server error |


# Delete events

	DELETE /api/v1/event?token=<token>&...

## Query String

|   |   |
|---|---|
| `token`     | Session token acquired with [/api/v1/session](/technical/api/session/session.md) |
| `limit`     | The maximum number of returned events (optional, integer). Unlimited, if unset. |
| `offset`    | The number of entries skipped in result set (optional, integer). 0 if unset. |
| `pollable`  | Filter for `pollable` attribute (boolean, optional). No filter if unset. |
| `type`      | Filter for `type` attribute (string, optional). No filter if unset. |
| `base_type` | Filter for `base_type` attribute (string, optional). No filter if unset. |
| `date_from` | Filter for minimum creation date/time (datetime, optional). No filter if unset. |
| `date_to`   | Filter for maximum creation date/time (datetime, optional). No filter if unset. |
| `sort`      | List of sort definitions (comma-separated). Per definition the field name is mandatory, the direction (`ASC` or `DESC`) is optional (defaulting to `ASC`). Supported fields are `_id`, `type`, `object_version`, `schema`, `object_id`, `timestamp`, `user_generated_displayname`. Example: `sort=schema,type.ASC,base_type.ASC,_id.DESC`. Default is `_id.DESC`. |

All filter/sorting parameters from `GET /api/v1/event/list` are supported.

## Output

Returns an JSON object containing the number of deleted events as `count`.

## Permissions

The user must be authenticated and must have the `root` right.

## HTTP status codes

|   |   |
|---|---|
| 200 | Success |
| 400 | [API error](/technical/errors/errors.md#api_error): something is malformed |
| 500 | [Server error](/technical/errors/errors.md#server_error): internal server error |
