# Session

Information about the current session. Everything is read-only.

## Attributes

These are common attributes that appear in every session:

| Name                     | Description |
|--------------------------|-------------|
| `token`                  | Session token (string): see [/api/session](/technical/api/session/session.html) |
| `instance`               | Information about the server instance |
| &#8614; `api`            | API version (string) |
| &#8614; `server_version` | Server version (int) |
| &#8614; `solution`       | Solution name (string) |
| &#8614; `user-schema`    | User schema version (int) |
| &#8614; `name`           | Instance name (string) |
| `frontend_language`      | Session language (string) |
| `frontend_locale`        | Locale corresponding to the session language (object): as read from the locale file |
| `authentication_methods` | Authentication methods that are allowed (array of objects with "method" string): see [/api/session](/technical/api/session/session.html); the first one is the default method |
| `config`                 | Configuration |
| &#8614; `base`           | Base configuration (object): this contains more information if the user is authenticated (\*) |
| &#8614; `defaults`       | Configuration defaults (object) |
| &#8614; `extensions`     | Configured extensions (object) |

(\*) In the base configuration settings, the fields that are marked as "unautheticated_visible" are the only ones available for unauthenticated sessions

These are attributes that only appear if the session is authenticated:

| Name                     | Description |
|--------------------------|-------------|
| `pending_tasks`          | Pending tasks (array of [pending tasks](#pending_task)) |
| `current_max_message_id` | The current maximum event ID: see [/api/event](/technical/api/event/event.html) |
| `system_rights`          | The system rights of the session ([rights specification](/technical/types/right/right.html#specification), r): combined from user and groups ACLs |
| `user`                   | User authenticated in this session ([user (session)](/technical/types/user/user.html#session)) |
| `groups`                 | The effective groups the session user belongs to, including system groups (array of [groups (short)](/technical/types/group/group.html#short)) |
| `authenticated`          | Authentication information: |
| &#8614; `method`         | - Authentication method (string) |
| &#8614; `timestamp`      | - When the user was authenticated (timestamp) |

## Pending task

A pending task is a task that has to be resolved before the authentication process can move forward. All pending tasks have a `type` field.
The other parameters depend on the type of the pending task

### Message

A non-permanent message that is associated with the user's group has not yet been confirmed by the user.
Notice that if a message that was already confirmed by a user is updated and its `confirm_every_version` flag is set,
it will be unconfirmed. See the [message documentation](/technical/types/message/message.html) for more information.

| Name                    | Description |
|-------------------------|-------------|
| `type`                  | Type of the pending task (string): **message** |
| `updated`               | Whether this message was already confirmed, but in a previous version (boolean) |
| `message`               | Attributes: |
| &#8614; `title`         | Message title in the preferred language (string) |
| &#8614; `message`       | Message content  in the preferred language (string) |
| &#8614; `message_key`   | Key to be passed to /api/session/messages_confirm in order to confirm this task (string) |
| &#8614; `confirm`       | Confirmation text in the preferred language, or **null** if no confirmation is required (string) |

### Set Password

The client has to set a password for the user.

| Name                    | Description |
|-------------------------|-------------|
| `type`                  | Type of the pending task (string): **set_password** |

### System Message

A message generated by the server (as opposed to regular messages, which are created by the administrator).
t is used to support operations such as the e-mail confirmation or forgot password process.

| Name                    | Description |
|-------------------------|-------------|
| `type`                  | Type of the pending task (string): **system_message** |
| `system_message`        | Attributes: |
| &#8614; `code`          | CSV key for the system message (string) |
| &#8614; `parameters`    | Parameters for the CSV key (map string &#8614; string) |

### Logout

The client has to log out.

| Name                    | Description |
|-------------------------|-------------|
| `type`                  | Type of the pending task (string): **logout** |

